# VKChatManager

## О программе

Инструментарии для контроля чата в ВКонтакте, с возможностью кастомизации команд и сообщении.  

## Как установить?

1. Клонируем репозитории и заходим в папку проекта  
2. В консоли подгружаем нужные связи ```composer install --ignore-platform-req=php```
3. Устанавливаем и настраиваем **MySQL** + **Apache HTTP Server**  
4. Импортируем в базу данных таблицы из файла **vkchatmanager.sql**  
5. Устанавливаем **PHP** версии 8 и выше  
6. В сообществе, где будет бот, в настройках **CallBack API** прописываем путь до файла **bot.php** относительно от домена и ставим версию API: **5.92**  
7. Редактируем **config.php**  
8. В настройках **CallBack API** нажимаем подтвердить  
9. В типах событий ставим галочку на **Входящее сообщение**  
10. Добавляем бота в беседу и назначаем его администратором  
11. Включаем общую защиту чата командой: **!secure enable**  

## Простой вариант установки

Рабочая версия бота: [https://vk.com/class_security](https://vk.com/class_security)

## Конфиг (config.php)

```PHP
<?php
$config = (object) [
    "access_token"  => "", // Access-токен аккаунта ВК
    "group_token"   => "", // Access-токен группы
    "secret"        => "", // Секретный ключ, который можно указать в настройках CallBack API группы 
    "confirm_token" => "", // Строка, которую должен вернуть сервер
    "group_id"      => "", // ID группы
    "DB"            => (object) [ // Найстройка MySQL
        "host"      => "", // Адрес сервера
        "username"  => "", // Имя пользователя
        "password"  => "", // Пароль пользователя
        "dbname"    => ""  // Имя базы данных куда был импортирован файл vkchatmanager.sql
    ],
    "algorithmia"   => "" // Токен-ключ от algorithmia (Нужно для корректной работы проверки 18+ контента)
];
?>
```

## Редактирование команд (commands.php)

```PHP
<?php
$commands = (object) [
    'help'              => "!help",             // Помощь
    'clear'             => "!clear",            // Чистка чата
    'all'               => "!all",              // Созыв всех участников чата
    'votekick'          => "!votekick",         // Начать голосование за исключение участника чата
    'kick'              => "!kick",             // Исключение участника из чата
    'admin_add'         => "!admin add",        // Добавление нового администратора в чате
    'admin_remove'      => "!admin remove",     // Удаление администратора в чате
    'admin_list'        => "!admin list",       // Вывод списка администраторов
    'show_secure'       => "!show secure",      // Вывод информации о защите чата
    'show_active'       => "!show active",      // Вывод активных пользователей чата
    'show_unactive'     => "!show unactive",    // Вывод неактивных пользователей чата
    'secure_nude'       => "!secure nude",      // Управление защитой от контента для взрослых
    'secure_links'      => "!secure links",     // Управление защитой от ссылок
    'secure_invites'    => "!secure invites",   // Управление защитой от инвайт-ссылок
    'secure_bots'       => "!secure bots",      // Управление защитой от ботов
    'secure'            => "!secure",           // Управление основной защитой
    'enable'            => "enable",            // Включение модуля защиты (Пример: !secure bots enable)
    'disable'           => "disable"            // Отключение модуля защиты (Пример: !secure bots disable)
];
?>
```

## Редактирование сообщении

Вы можете редактировать сообщения под свой вкус в файле: **messages.php**

## Возможности защиты

Реагирование на:

- Ссылки и инвайт-ссылки  
- Быстроту сообщении
- Длину сообщении
- Идентичность сообщении
- 18+ контент
- Ботов

## Поддержать автора

[https://yoomoney.ru/to/410012335150397](https://yoomoney.ru/to/410012335150397)
